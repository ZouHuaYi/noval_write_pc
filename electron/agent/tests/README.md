# Agent æµ‹è¯•æ¡†æ¶

## ğŸ“‹ æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„æµ‹è¯•æ¡†æ¶ï¼Œç”¨äºéªŒè¯ Skill å’Œ Planner çš„æ­£ç¡®æ€§ï¼Œç¡®ä¿ç³»ç»Ÿé•¿æœŸç¨³å®šã€‚

## ğŸ¯ æµ‹è¯•å†…å®¹

### 1. Skill éªŒè¯ (`skillValidator.js`)
- âœ… éªŒè¯ Skill å®šä¹‰ä¸çŠ¶æ€å¥‘çº¦çš„ä¸€è‡´æ€§
- âœ… æ£€æŸ¥ `requiresState` å’Œ `producesState` çš„æ­£ç¡®æ€§
- âœ… éªŒè¯çŠ¶æ€é”®æ ¼å¼
- âœ… æ£€æµ‹çŠ¶æ€ä¾èµ–å¾ªç¯
- âœ… éªŒè¯ç›®æ ‡çŠ¶æ€å¯è¾¾æ€§

### 2. Planner éªŒè¯ (`plannerValidator.js`)
- âœ… éªŒè¯ Planner èƒ½ä¸ºæ‰€æœ‰ Intent ç”Ÿæˆæœ‰æ•ˆè§„åˆ’
- âœ… éªŒè¯çŠ¶æ€è½¬æ¢è·¯å¾„
- âœ… æ£€æµ‹è§„åˆ’å¾ªç¯
- âœ… éªŒè¯ Skill æ‰§è¡Œæ¬¡æ•°é™åˆ¶

### 3. æµ‹è¯•è¿è¡Œå™¨ (`testRunner.js`)
- âœ… è‡ªåŠ¨åŒ–æ‰§è¡Œæ‰€æœ‰æµ‹è¯•
- âœ… ç”Ÿæˆ JSON å’Œ Markdown æŠ¥å‘Š
- âœ… æä¾›è¯¦ç»†çš„é”™è¯¯å’Œè­¦å‘Šä¿¡æ¯

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å¿«é€Ÿæµ‹è¯•ï¼ˆåªéªŒè¯ Skillï¼‰

```bash
node electron/agent/tests/runTests.js --quick
```

### å®Œæ•´æµ‹è¯•ï¼ˆåŒ…å« Planner éªŒè¯ï¼‰

```bash
node electron/agent/tests/runTests.js
```

### è¯¦ç»†è¾“å‡ºæ¨¡å¼

```bash
node electron/agent/tests/runTests.js --verbose
```

### åœ¨ä»£ç ä¸­ä½¿ç”¨

```javascript
const TestRunner = require('./electron/agent/tests/testRunner');

// è¿è¡Œæ‰€æœ‰æµ‹è¯•
const runner = new TestRunner({ verbose: true });
const result = await runner.runAll();

if (result.success) {
  console.log('âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡');
} else {
  console.log('âŒ éƒ¨åˆ†æµ‹è¯•å¤±è´¥');
  console.log(result.summary);
}
```

## ğŸ“Š æµ‹è¯•æŠ¥å‘Š

æµ‹è¯•æŠ¥å‘Šä¼šä¿å­˜åœ¨ `test-results/` ç›®å½•ä¸‹ï¼š

- `test-report-{timestamp}.json` - JSON æ ¼å¼æŠ¥å‘Š
- `test-report-{timestamp}.md` - Markdown æ ¼å¼æŠ¥å‘Š

## ğŸ” éªŒè¯å†…å®¹è¯¦è§£

### Skill éªŒè¯

1. **çŠ¶æ€å¥‘çº¦æ£€æŸ¥**
   - æ¯ä¸ª Skill å¿…é¡»æœ‰å¯¹åº”çš„çŠ¶æ€å¥‘çº¦
   - `producesState` ä¸èƒ½ä¸ºç©º
   - çŠ¶æ€é”®æ ¼å¼å¿…é¡»æ­£ç¡®

2. **è¾“å…¥è¾“å‡ºä¸€è‡´æ€§**
   - `producesState` åº”ä¸ `outputSchema` ä¸€è‡´
   - `requiresState` åº”èƒ½ä» AgentState è·å–

3. **ä¾èµ–å¾ªç¯æ£€æµ‹**
   - æ£€æµ‹ Skill ä¹‹é—´çš„å¾ªç¯ä¾èµ–
   - ç¡®ä¿è§„åˆ’ä¸ä¼šé™·å…¥æ­»å¾ªç¯

4. **ç›®æ ‡å¯è¾¾æ€§**
   - éªŒè¯æ‰€æœ‰ç›®æ ‡çŠ¶æ€éƒ½æœ‰ Skill èƒ½äº§ç”Ÿ
   - ç¡®ä¿ Planner èƒ½åˆ°è¾¾ç›®æ ‡

### Planner éªŒè¯

1. **è§„åˆ’ç”Ÿæˆ**
   - éªŒè¯ Planner èƒ½ä¸ºæ¯ä¸ª Intent ç”Ÿæˆè§„åˆ’
   - æ£€æŸ¥è§„åˆ’çš„æ ¼å¼å’Œæœ‰æ•ˆæ€§

2. **çŠ¶æ€è½¬æ¢**
   - éªŒè¯ä»åˆå§‹çŠ¶æ€åˆ°ç›®æ ‡çŠ¶æ€çš„è½¬æ¢è·¯å¾„
   - ç¡®ä¿æ¯ä¸€æ­¥çš„çŠ¶æ€è½¬æ¢æ­£ç¡®

3. **å¾ªç¯æ£€æµ‹**
   - æ£€æµ‹ Planner æ˜¯å¦ä¼šäº§ç”Ÿå¾ªç¯
   - éªŒè¯ Skill æ‰§è¡Œæ¬¡æ•°é™åˆ¶

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **LLM ä¾èµ–**
   - Planner éªŒè¯éœ€è¦æ¨¡æ‹Ÿ LLM è°ƒç”¨
   - å®Œæ•´æµ‹è¯•å¯èƒ½éœ€è¦çœŸå®çš„ LLMï¼ˆå¯é€‰ï¼‰

2. **çŠ¶æ€æ¨¡æ‹Ÿ**
   - æµ‹è¯•ä¸­ä½¿ç”¨æ¨¡æ‹ŸçŠ¶æ€æ›´æ–°
   - å®é™…æ‰§è¡Œæ—¶çŠ¶æ€å¯èƒ½ä¸åŒ

3. **æ€§èƒ½è€ƒè™‘**
   - å®Œæ•´æµ‹è¯•å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´
   - å»ºè®®åœ¨ CI/CD ä¸­ä½¿ç”¨å¿«é€Ÿæµ‹è¯•

## ğŸ› ï¸ æ‰©å±•æµ‹è¯•

### æ·»åŠ æ–°çš„éªŒè¯è§„åˆ™

åœ¨ `skillValidator.js` ä¸­æ·»åŠ æ–°çš„éªŒè¯æ–¹æ³•ï¼š

```javascript
validateCustomRule(skillDef) {
  // ä½ çš„éªŒè¯é€»è¾‘
  if (/* æ¡ä»¶ */) {
    this.errors.push({
      skill: skillDef.name,
      type: 'custom_rule',
      message: 'è‡ªå®šä¹‰è§„åˆ™éªŒè¯å¤±è´¥'
    });
  }
}
```

### æ·»åŠ æ–°çš„æµ‹è¯•ç”¨ä¾‹

åœ¨ `plannerValidator.js` ä¸­æ·»åŠ æ–°çš„æµ‹è¯•æ–¹æ³•ï¼š

```javascript
async validateCustomScenario() {
  // ä½ çš„æµ‹è¯•é€»è¾‘
  const result = await this.planner.plan(/* ... */);
  // éªŒè¯ç»“æœ
}
```

## ğŸ“ æœ€ä½³å®è·µ

1. **å®šæœŸè¿è¡Œæµ‹è¯•**
   - åœ¨æ·»åŠ æ–° Skill åè¿è¡Œ
   - åœ¨ä¿®æ”¹çŠ¶æ€å¥‘çº¦åè¿è¡Œ
   - åœ¨æ¨¡å‹å‡çº§å‰è¿è¡Œ

2. **ä¿®å¤è­¦å‘Š**
   - è­¦å‘Šè™½ç„¶ä¸ä¼šå¯¼è‡´æµ‹è¯•å¤±è´¥ï¼Œä½†å¯èƒ½å½±å“ç³»ç»Ÿç¨³å®šæ€§
   - å»ºè®®ä¿®å¤æ‰€æœ‰è­¦å‘Š

3. **ä¿æŒå¥‘çº¦æ›´æ–°**
   - ä¿®æ”¹ Skill å®ç°æ—¶ï¼ŒåŒæ­¥æ›´æ–°çŠ¶æ€å¥‘çº¦
   - ç¡®ä¿ `stateContracts.js` ä¸ `skillDefinitions.json` ä¸€è‡´

## ğŸ”— ç›¸å…³æ–‡ä»¶

- `skillValidator.js` - Skill éªŒè¯å™¨
- `plannerValidator.js` - Planner éªŒè¯å™¨
- `testRunner.js` - æµ‹è¯•è¿è¡Œå™¨
- `runTests.js` - æµ‹è¯•å…¥å£
- `../skills/core/stateContracts.js` - çŠ¶æ€å¥‘çº¦å®šä¹‰
- `../skills/definitions/skillDefinitions.json` - Skill å®šä¹‰

